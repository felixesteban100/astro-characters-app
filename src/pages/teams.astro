---
export const prerender = true

import {
  GetColorLogosByPublisher,
  GetColorOfTheLogoByTeam,
} from "$lib/charactersUtils";
import { ALLUNIVERSESWITHTEAMS } from "$lib/constants/constants";
import { cn } from "$lib/utils";
import Layout from "src/layouts/Layout.astro";

// const allUniversesWithItsTeams: UniversesWithItsTeams[] = ALLUNIVERSE.slice(
//   1,
//   ALLUNIVERSE.length - 1
// ).reduce((allUniverses, universe) => {

//   if (UNIVERSES_WITH_TEAMS.includes(universe.value)) {
//     allUniverses.push({
//       info: universe,
//       img: publisherIMG(universe.value),
//       teams: getTeamByUniverse(universe.value).filter((team) => team.value !== "All"),
//     });
//   }

//   return allUniverses;
// }, new Array());

// console.log(JSON.stringify(allUniversesWithItsTeams))
---

<Layout title="Teams">
  <div class="w-full flex flex-col justify-center">
    {
      ALLUNIVERSESWITHTEAMS.map((universe) => {
        return (
          <div class="border my-5 p-5 rounded-md">
            <a
              href={`/characters?universe=${universe.info.value}&team=${'All'}`}
              class="group/publisher"
            >
              <img
                src={universe.img}
                width={500}
                height={500}
                alt={universe.info.value}
                class={cn(
                  `w-[20%] h-auto mx-auto ${GetColorLogosByPublisher(universe.info.value)}`
                )}
                transition:name={`media-image-${universe.info.value}`}
              />
            </a>
            <div>
              <div class="grid 2xl:grid-cols-4 grid-cols-3  justify-center items-center">
                {universe.teams.map((team) => {
                  return (
                    <a
                      href={`/characters?universe=${universe.info.value}&team=${team.value}`}
                      class="group/publisher w-full flex flex-col justify-center items-center"
                    >
                      <img
                        src={team.img}
                        height={500}
                        width={500}
                        alt={team.name}
                        class={`w-[80%] h-auto col-span-1 ${GetColorOfTheLogoByTeam(team.value)}`}
                        transition:name={`media-image-${team.value}`}
                      />
                      <p class="group-hover/publisher:underline">{team.name}</p>
                    </a>
                  );
                })}
              </div>
            </div>
          </div>
        );
      })
    }
  </div>
</Layout>
$lib/constants/constants